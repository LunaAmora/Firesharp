true  : -> bool : 1 #bool end
false : -> bool : 0 #bool end
null  : -> ptr  : 0 #ptr end
!bool : bool ptr : !32 end
!ptr  : ptr  ptr : !32 end
!int  : int  ptr : !32 end
@bool : ptr -> bool : @32 #bool end
@ptr  : ptr -> ptr  : @32 #ptr end
@int  : ptr -> int  : @32 end

+ptr : int ptr -> ptr : swap #ptr + end
ptr+ : ptr int -> ptr : #ptr + end
ptr- : ptr int -> ptr : #ptr - end

str :
  len  int
  data ptr
end

420_const :: 419 1 + end
69_const :: 34 dup 1 + + end
constant_value :: 69_const end
variable_value := 420_const end

puts : str :
  ciovec: 8 end
  written: 4 end
  ciovec !ptr
  ciovec 4 ptr+ !int
  1 ciovec 1 written fd_write drop
end

start ::
  string_variable str := end
  constant_value !variable_value

  "Hello World!\n"
  "Other text here!!\n"

  let len data len2 data2 :
    variable_value 69 = if
      len data 
    else 
      len2 data2
    end
    !string_variable
  end

  string_variable puts
end
